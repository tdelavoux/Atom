!function($){$.fn.atomDataTable=function(customOptions){var sortClass="a-sort",directionAttr="data-direction";const direction=["asc","desc"],types=["string","number","Ymd","m/d/Y","m-d-y","d/m/Y","d-m-y"];var tableid=Date.now().toString(Math.floor(10*Math.random())+10)+Math.floor(1e3*Math.random()).toString(Math.floor(10*Math.random())+10),regex_dateDb=/^((19|20)\d{2})((0|1)\d{1})([0-3]\d{1})/g,regex_dateFrSlash=/^([0-3]\d{1})\/([0-1]\d{1})\/((19|20)\d{2})/g,regex_dateEnSlash=/^((0|1|2)\d{1})\/([0-3]\d{1})\/((19|20)\d{2})/g,regex_dateEnDash=/^((19|20)\d{2})-([0-1]\d{1})-([0-3]\d{1})/g,regex_dateFrDash=/^([0-3]\d{1})-([0-1]\d{1})-((19|20)\d{2})/g,options={autoFilter:!0,filterableColumn:!1,orderableColumn:!1,preOrderedColumn:!1,columnType:!1,autoSort:!1,nbPerPage:!1,inputBorder:""};if(this.initialize=function(customOptions){var table=$(this);function addClassFilter(){table.find("tbody").find("tr").addClass(`atom-tr-${tableid}`)}function addInputShuffleField(){var searchField='<div class="ar"><i class="fas fa-search"></i><input id="atom-search-'+tableid+'" class="a-input a-table-filter '+options.inputBorder+'" style="max-width: fit-content;" placeholder="Mot-clef"></div>';$(searchField).insertBefore(table);var shuffler=new atomShuffle({itemSelector:`.atom-tr-${tableid}`,animationTime:200});$(`#atom-search-${tableid}`).keyup((function(){var inputValue=$(this).val().toLowerCase();shuffler.filter((function(element){return atomDatatableUpdateFilter(element,inputValue)})),options.nbPerPage&&paginationShuffling()}))}function atomDatatableUpdateFilter(element,inputValue){if(options.filterableColumn instanceof Array){var txtRes="";return options.filterableColumn.forEach((function(index){txtRes+=$(`td:nth-child(${index-1})`,element).text()})),txtRes.toLowerCase().includes(inputValue)}return element.text().toLowerCase().includes(inputValue)}function addClassSortHead(){var tableHeader;options.orderableColumn instanceof Array?$.each(options.orderableColumn,(function(key,colNumber){isNaN(colNumber)||$(table.find("th").eq(colNumber).addClass("a-sort")).on("click",(function(){sortColumn(colNumber)}))})):$("thead tr",table).find("th").each((function(){$(this).addClass("a-sort"),$(this).on("click",(function(){sortColumn($(this).index())}))}))}function sortColumn(colNumber){if(colNumber>=$("thead tr th",table).length)console.log("Invalid column number. count start at 0.");else{var rows=table.children("tbody").children().detach().get();rows.forEach(value=>{value.hasAttribute(directionAttr)?value.getAttribute(directionAttr)==direction[0]?(value.setAttribute(directionAttr,direction[1]),ascending=!1):value.getAttribute(directionAttr)==direction[1]&&(value.setAttribute(directionAttr,direction[0]),ascending=!0):(value.setAttribute(directionAttr,direction[0]),ascending=!0)}),colType=types.includes(options.columnType[colNumber])?options.columnType[colNumber]:types[0],functionCaller(colType,ascending,colNumber,rows),reOrderNb(rows),table.children("tbody").append(rows),displayPages(table.attr("data-page"))}}function sortString(rows,value,ascending){rows.sort((function(a,b){return ascending?a.children[value].innerHTML.toLowerCase()<b.children[value].innerHTML.toLowerCase()?-1:0:a.children[value].innerHTML.toLowerCase()>b.children[value].innerHTML.toLowerCase()?-1:0}))}function sortNumber(rows,value,ascending){rows.sort((function(a,b){if(!isNaN(a.children[value].innerHTML)&&!isNaN(b.children[value].innerHTML))return ascending?a.children[value].innerHTML-b.children[value].innerHTML:b.children[value].innerHTML-a.children[value].innerHTML;throwError(value,rows)}))}function sortDbDate(rows,value,ascending){rows.sort((function(a,b){var allRegex=getRegexConstructs(regex_dateDb);if(allRegex[0].test(a.children[value].innerHTML),allRegex[1].test(b.children[value].innerHTML))return ascending?a.children[value].innerHTML-b.children[value].innerHTML:b.children[value].innerHTML-a.children[value].innerHTML;throwError(value,rows)}))}function sortDateEnSlash(rows,value,ascending){rows.sort((function(a,b){var allRegex=getRegexConstructs(regex_dateEnSlash);if(allRegex[0].test(a.children[value].innerHTML),allRegex[1].test(b.children[value].innerHTML))return ascending?new Date(a.children[value].innerHTML)-new Date(b.children[value].innerHTML):new Date(b.children[value].innerHTML)-new Date(a.children[value].innerHTML);throwError(value,rows)}))}function sortDateEnDash(rows,value,ascending){rows.sort((function(a,b){var allRegex=getRegexConstructs(regex_dateEnDash);if(allRegex[0].test(a.children[value].innerHTML),allRegex[1].test(b.children[value].innerHTML)){var explodedDateA=a.children[value].innerHTML.split("-"),explodedDateB=b.children[value].innerHTML.split("-");return ascending?new Date(`${explodedDateA[1]}/${explodedDateA[2]}/${explodedDateA[0]}`)-new Date(`${explodedDateB[1]}/${explodedDateB[2]}/${explodedDateB[0]}`):new Date(`${explodedDateB[1]}/${explodedDateB[2]}/${explodedDateB[0]}`)-new Date(`${explodedDateA[1]}/${explodedDateA[2]}/${explodedDateA[0]}`)}throwError(value,rows)}))}function sortDateFrSlash(rows,value,ascending){rows.sort((function(a,b){var allRegex=getRegexConstructs(regex_dateFrSlash);if(allRegex[0].test(a.children[value].innerHTML),allRegex[1].test(b.children[value].innerHTML)){var explodedDateA=a.children[value].innerHTML.split("/"),explodedDateB=b.children[value].innerHTML.split("/");return ascending?new Date(`${explodedDateA[1]}/${explodedDateA[0]}/${explodedDateA[2]}`)-new Date(`${explodedDateB[1]}/${explodedDateB[0]}/${explodedDateB[2]}`):new Date(`${explodedDateB[1]}/${explodedDateB[0]}/${explodedDateB[2]}`)-new Date(`${explodedDateA[1]}/${explodedDateA[0]}/${explodedDateA[2]}`)}throwError(value,rows)}))}function sortDateFrDash(rows,value,ascending){rows.sort((function(a,b){var allRegex=getRegexConstructs(regex_dateFrDash);if(allRegex[0].test(a.children[value].innerHTML),allRegex[1].test(b.children[value].innerHTML)){var explodedDateA=a.children[value].innerHTML.split("-"),explodedDateB=b.children[value].innerHTML.split("-");return ascending?new Date(`${explodedDateA[1]}/${explodedDateA[0]}/${explodedDateA[2]}`)-new Date(`${explodedDateB[1]}/${explodedDateB[0]}/${explodedDateB[2]}`):new Date(`${explodedDateB[1]}/${explodedDateB[0]}/${explodedDateB[2]}`)-new Date(`${explodedDateA[1]}/${explodedDateA[0]}/${explodedDateA[2]}`)}throwError(value,rows)}))}function functionCaller(funcName,ascending,value,rows){var functions;({string:function(){sortString(rows,value,ascending)},number:function(){sortNumber(rows,value,ascending)},Ymd:function(){sortDbDate(rows,value,ascending)},"m/d/Y":function(){sortDateEnSlash(rows,value,ascending)},"d/m/Y":function(){sortDateFrSlash(rows,value,ascending)},"m-d-y":function(){sortDateEnDash(rows,value,ascending)},"d-m-y":function(){sortDateFrDash(rows,value,ascending)}})[funcName]()}function getRegexConstructs(regex){return[new RegExp(regex),new RegExp(regex)]}function throwError(value,rows){throw table.children("tbody").append(rows),`Wrong format type for column ${value} !`}function buildPagination(){if(options.nbPerPage){var rows=table.children("tbody").children().detach().get(),nb=0;rows.forEach(row=>{$(row).attr("data-nb",nb),nb++}),table.children("tbody").append(rows);var nbPages=parseInt(rows.length/options.nbPerPage)+1,colspan=table.children("tbody").children("tr:first-child").children("td").length;table.append('<tfoot><tr><td class="center a-paginate-line" colspan="'+colspan+'">');for(var i=0;i<nbPages;i++)table.children("tfoot").children("tr").children("td").append('<button type="button" data-index="'+i+'" class="a-btn-sm a-primary a-paginate-btn">'+(i+1)+"</button>");$('<button id="etcBtnEnd" type="button" class="a-btn-sm a-primary">...</button>').insertBefore(table.children("tfoot").children("tr").children("td").children("button:last-child")),$('<button id="etcBtnStart" type="button" class="a-btn-sm a-primary">...</button>').insertAfter(table.children("tfoot").children("tr").children("td").children("button:first-child")),table.children("tfoot").children().children().children().click((function(){displayPages($(this).attr("data-index"))}))}}function reOrderNb(rows){var nb=0;rows.forEach(row=>{void 0!==$(row).attr("data-nb")&&($(row).attr("data-nb",nb),nb++)})}function displayPagesBtn(maxBtn){null==maxBtn&&(maxBtn=parseInt(table.children("tfoot").children().children().children("button:not(.a-hide)").last().attr("data-index")));var currPage=parseInt(table.attr("data-page")),btns=table.children("tfoot").children().children().children();for(var btn of btns){var index=parseInt($(btn).attr("data-index"));null!=index&&index!=maxBtn&&0!=index&&(index>currPage+3||index>maxBtn||index<currPage-2)?$(btn).addClass("a-hide"):$(btn).removeClass("a-hide")}maxBtn>3&&maxBtn-4>=currPage?($(table).find("#etcBtnEnd").removeClass("a-hide"),$(table).find("#etcBtnEnd").insertBefore($(table).find('button[data-index="'+maxBtn+'"]'))):$(table).find("#etcBtnEnd").addClass("a-hide"),currPage-2>1?$(table).find("#etcBtnStart").removeClass("a-hide"):$(table).find("#etcBtnStart").addClass("a-hide")}function paginationShuffling(){var rows=table.children("tbody").children("tr:not(.a-hide)").get(),maxBtn;$(rows).attr("data-nb",""),table.children("tbody").children(".a-hide").removeAttr("data-nb"),reOrderNb(rows),displayPagesBtn(parseInt(rows.length/options.nbPerPage)),displayPages(0)}function displayPages(nbPage){if(null!=nbPage){var rows=table.children("tbody").children(),min=nbPage*options.nbPerPage,max=min+options.nbPerPage;for(var row of rows){var dataNb=$(row).attr("data-nb");void 0===dataNb||dataNb>=max||dataNb<min?$(row).addClass("a-hide"):$(row).removeClass("a-hide")}table.attr("data-page",nbPage),displayPagesBtn()}}return $.extend(options,customOptions),addClassSortHead(),addClassFilter(),addInputShuffleField(),buildPagination(0),options.nbPerPage&&displayPages(0),this},this.destroy=function(){return this.unbind(),null},!(this.length>1))return this.initialize(customOptions);console.log("Atom Datatable : Can't initialize on multiple objects.")}}(jQuery);